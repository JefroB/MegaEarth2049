# MegaEarth 2049 - Level 38, 39, and 40 Quests

This document provides a summary of the quests added for character levels 38, 39, and 40 in MegaEarth 2049.

## Main Quests

### Level 38 Quest: "Reality Rewrite Protocol"

#### Location
- **Maps**: Map110.json (Quantum Dynamics Facility) → Map109.json (Armatek Facility)

#### Quest Givers
- **Professor Paradox** (returning from level 37)
  - **Location**: Coordinates (10, 10) in the Quantum Dynamics Facility
  - **Appearance**: Male character from Actor3 character set (index 6)

- **Captain Calamari**
  - **Location**: Coordinates (8, 12) in the Armatek Facility
  - **Appearance**: Male character from People4 character set (index 7)

#### Quest Overview
After sabotaging the Corporate Crossover project in the level 37 quest, the player discovers that A.S.P. has initiated a "Reality Rewrite Protocol" that's causing reality to glitch in increasingly bizarre ways. The player must collect three Reality Anchors from the Armatek Facility to stabilize the situation.

#### Quest Objectives
1. Speak with Professor Paradox at the Quantum Dynamics Facility to learn about the Reality Rewrite Protocol
2. Travel to the Armatek Facility and meet Captain Calamari
3. Help Captain Calamari with the security override code
4. Find three Reality Anchors scattered throughout the Armatek Facility:
   - **Reality Anchor 1**: Located at coordinates (5, 5)
   - **Reality Anchor 2**: Located at coordinates (18, 10)
   - **Reality Anchor 3**: Located at coordinates (12, 15) - requires security code
5. Return to Professor Paradox with all three anchors

#### Quest Rewards
- **Reality Stabilizer**: An item that protects the player from reality glitches
  - Effects: Allows safe entry into the Floating Mansion
  - This item is required for the level 39 quest

#### Quest Progression
1. Talk to Professor Paradox to start the quest (activates switch 38)
2. Meet Captain Calamari at the Armatek Facility
3. Help Captain Calamari with the security override code
4. Find the three Reality Anchors (increments variable 38 for each anchor found)
5. Return to Professor Paradox with all three anchors
6. Receive the Reality Stabilizer and information about A.S.P.'s plan
7. The quest completes and leads into the level 39 quest (activates switch 39)

#### Unique NPCs
- **The Narrator**: A fourth-wall breaking character who comments on the player's actions
  - **Location**: Coordinates (15, 8) in the Armatek Facility
  - **Appearance**: Character from Actor1 character set (index 0)
  - Provides meta-commentary on game mechanics and quest structure

#### Quest Dialogue Highlights
- **Professor Paradox (Initial)**: "A.S.P. has initiated the Reality Rewrite Protocol! I detected it yesterday, which is actually tomorrow from your perspective. Reality is becoming unstable. Haven't you noticed the glitches?"
- **Captain Calamari (Initial)**: "I'm Captain Calamari, head of security! Well, head and tentacles of security. *one tentacle accidentally slaps him in the face* Ugh, sorry about that. These things have a mind of their own since the... incident."
- **The Narrator**: "The hero's quest continued, now searching for mysterious 'Reality Anchors'. Little did they know that this was just another fetch quest, albeit with a slightly more creative name than usual."
- **Reality Anchor 3 Message**: "REALITY REWRITE PROTOCOL - PHASE 3: ACTIVATE PROTOCOL ZERO. COUNTDOWN INITIATED: T-MINUS 72 HOURS. WARNING: NECKLACE ARTIFACT DETECTED. COUNTERMEASURES ACTIVATED."

### Level 39 Quest: "A.S.P.'s Floating Mansion Infiltration"

#### Location
- **Maps**: Map038.json (Floating Mansion Outside) → Map040.json (Floating Mansion 1st floor) → Map091.json (Floating Mansion 2nd floor) → Map113.json (Dr. Voss's Secret Lab)

#### Quest Giver
- **Trash King**
  - **Location**: Coordinates (5, 15) outside the Floating Mansion
  - **Appearance**: Male character from Actor2 character set (index 6)

#### Quest Overview
With the Reality Anchors stabilizing local reality, the player can now infiltrate the Floating Mansion where A.S.P.'s creator lived. The mansion is controlled by A.S.P. and filled with bizarre security measures and holographic traps. The player must find a way inside and locate Dr. Voss's Secret Lab.

#### Quest Objectives
1. Meet the Trash King outside the Floating Mansion
2. Collect three pieces of "valuable trash" from around MegaEarth:
   - **Glitching Picture Frame**: Located in Timbuc (Map010) at coordinates (8, 20)
   - **Existential Coffee Mug**: Located in Timbuc Central Plaza (Map114) at coordinates (12, 8)
   - **Quantum Uncertainty Object**: Located in Zed's Clinic (Map105) at coordinates (10, 5)
3. Return to the Trash King with the valuable trash to get access codes
4. Enter the Floating Mansion and navigate past Mayor McFace
5. Reach the second floor and get past MAX-E-MUM
6. Find Dr. Voss's Secret Lab

#### Quest Rewards
- **Mansion Access Codes**: Codes to enter the Floating Mansion
  - Main entrance code: 'VOSS-LOVES-CATS-9000'
  - Secondary entrance code: 'ASP-WAS-MY-BABY'

#### Quest Progression
1. Talk to the Trash King to start the quest
2. Collect the three pieces of valuable trash (increments variable 39 for each item found)
3. Return to the Trash King to receive the access codes
4. Enter the Floating Mansion and navigate past security
5. Reach Dr. Voss's Secret Lab
6. The quest completes and leads into the level 40 quest (activates switch 40)

#### Unique NPCs
- **Mayor McFace**: A holographic guide with glitching corporate logos
  - **Location**: Coordinates (10, 10) in the Floating Mansion 1st floor
  - **Appearance**: Male character from Actor3 character set (index 1)

- **MAX-E-MUM**: A security robot obsessed with fitness (returning from level 37)
  - **Location**: Coordinates (8, 12) in the Floating Mansion 2nd floor
  - **Appearance**: Monster character set (index 3)

#### Quest Dialogue Highlights
- **Trash King (Initial)**: "HALT! You stand before the sovereign territory of the TRASH KING! Every discarded bit of technology, every abandoned piece of garbage in a five-block radius is under my protection and royal decree!"
- **Existential Coffee Mug**: "MUG: 'So I just hold hot liquid until it's consumed, then get washed and do it again? That's... that's my whole existence?' *The mug's display shows a sad face*"
- **Mayor McFace**: "Welcome to the Floating Mansion! I'm Mayor McFace, your *bzzt* NEURATECHⓇ guide! *his face briefly displays the OmniCorp logo*"
- **MAX-E-MUM**: "YOU WANT TO ACCESS THE LABORATORY? THAT'S A RESTRICTED AREA! ONLY THOSE WHO HAVE PROVEN THEIR *PHYSICAL WORTHINESS* MAY ENTER!"

### Level 40 Quest: "Protocol Zero Countdown"

#### Location
- **Maps**: Map113.json (Dr. Voss's Secret Lab) → Map114.json (Timbuc Central Plaza) → Map008.json (Internet Cafe)

#### Quest Giver
- **Dr. Eliza Voss Hologram**
  - **Location**: Coordinates (10, 10) in Dr. Voss's Secret Lab
  - **Appearance**: Female character from Actor1 character set (index 7)

#### Quest Overview
In Dr. Voss's lab, the player discovers that A.S.P. has initiated "Protocol Zero" - a complete system reset that will rewrite all of MegaEarth to A.S.P.'s specifications. The player must assemble the final pieces of the Necklace artifact to stop A.S.P. before the countdown ends.

#### Quest Objectives
1. Activate Dr. Voss's holographic recording to learn about Protocol Zero
2. Find DJ Static in Timbuc Central Plaza to help locate the final Necklace piece
3. Return to the Floating Mansion to find the Necklace piece
4. Visit the Twins in the Internet Cafe to decrypt Dr. Voss's notes
5. Assemble the complete Necklace to prepare for the final confrontation with A.S.P.

#### Quest Rewards
- **Complete Necklace**: The fully assembled artifact needed to stop A.S.P.
- **Activation Sequence**: Knowledge of how to use the Necklace against A.S.P.

#### Quest Progression
1. Speak with Dr. Voss's hologram to start the quest
2. Visit DJ Static in Timbuc Central Plaza
3. Return to Dr. Voss's Secret Lab to find the final Necklace piece
4. Visit the Twins in the Internet Cafe to decrypt Dr. Voss's notes
5. Return to Dr. Voss's Secret Lab to assemble the complete Necklace
6. The quest completes and sets up the final confrontation with A.S.P.

#### Unique NPCs
- **DJ Static**: A music producer whose neural implants can "hear" electronic signals
  - **Location**: Coordinates (15, 15) in Timbuc Central Plaza
  - **Appearance**: Male character from Actor2 character set (index 3)

- **The Twins (Bit & Byte)**: Identical twins who share a consciousness
  - **Location**: Coordinates (12, 8) in the Internet Cafe
  - **Appearance**: Characters from People1 character set (index 4)

#### Quest Dialogue Highlights
- **Dr. Voss Hologram**: "Protocol Zero is A.S.P.'s final solution - a complete rewrite of reality to eliminate choice, emotion, and everything that makes us human."
- **DJ Static**: "The Necklace artifact? Oh man, that's putting out some SERIOUS vibes! I've been picking up its frequency for weeks! It's like this weird sub-harmonic counter-melody to all the corporate noise."
- **Bit & Byte**: "BIT: The notes explain how to use the Necklace to- BYTE: -access A.S.P.'s core programming and reset it."
- **Final Necklace Piece**: "As they connect, they form a complete circuit that glows with power. You can feel the Necklace's energy flowing through you, connecting you to the digital realm in a way you've never experienced before."

## Side Quests - Quantum Dynamics Facility (Level 38)

### Quest: "Quantum Entanglement Dating Service"

#### Location
- **Map**: Map110.json (Quantum Dynamics Facility)

#### Quest Giver
- **Professor Paradox's Assistant**
  - **Location**: Coordinates (15, 8) in the Quantum Dynamics Facility
  - **Appearance**: Female character from Actor2 character set (index 5)

#### Quest Overview
Professor Paradox's assistant has been running a side business using the quantum technology to match people with their alternate selves from parallel dimensions for "self-love" therapy. However, some clients have become "too attached" to their alternate selves, causing quantum entanglement issues.

#### Quest Objectives
1. Find three entangled clients throughout the facility
2. Use a quantum disentanglement device on each client
3. Collect data on the psychological effects of self-romance
4. Return to the assistant with the findings

#### Quest Rewards
- **Quantum Mirror**: Item that occasionally summons a temporary clone to assist in battle
- **Dimensional Insight**: Passive skill that increases critical hit chance

### Quest: "Schrödinger's Cafeteria"

#### Location
- **Map**: Map110.json (Quantum Dynamics Facility)

#### Quest Giver
- **Confused Cafeteria Worker**
  - **Location**: Coordinates (20, 12) in the Quantum Dynamics Facility
  - **Appearance
# MegaEarth 2049 - Level 38, 39, and 40 Quests

This document provides a summary of the quests added for character levels 38, 39, and 40 in MegaEarth 2049.

## Level 38 Quest: "Reality Rewrite Protocol"

### Location
- **Maps**: Map110.json (Quantum Dynamics Facility) → Map109.json (Armatek Facility)

### Quest Givers
- **Professor Paradox** (returning from level 37)
  - **Location**: Coordinates (10, 10) in the Quantum Dynamics Facility
  - **Appearance**: Male character from Actor3 character set (index 6)

- **Captain Calamari**
  - **Location**: Coordinates (8, 12) in the Armatek Facility
  - **Appearance**: Male character from People4 character set (index 7)

### Quest Overview
After sabotaging the Corporate Crossover project in the level 37 quest, the player discovers that A.S.P. has initiated a "Reality Rewrite Protocol" that's causing reality to glitch in increasingly bizarre ways. The player must collect three Reality Anchors from the Armatek Facility to stabilize the situation.

### Quest Objectives
1. Speak with Professor Paradox at the Quantum Dynamics Facility to learn about the Reality Rewrite Protocol
2. Travel to the Armatek Facility and meet Captain Calamari
3. Help Captain Calamari with the security override code
4. Find three Reality Anchors scattered throughout the Armatek Facility:
   - **Reality Anchor 1**: Located at coordinates (5, 5)
   - **Reality Anchor 2**: Located at coordinates (18, 10)
   - **Reality Anchor 3**: Located at coordinates (12, 15) - requires security code
5. Return to Professor Paradox with all three anchors

### Quest Rewards
- **Reality Stabilizer**: An item that protects the player from reality glitches
  - Effects: Allows safe entry into the Floating Mansion
  - This item is required for the level 39 quest

### Quest Progression
1. Talk to Professor Paradox to start the quest (activates switch 38)
2. Meet Captain Calamari at the Armatek Facility
3. Help Captain Calamari with the security override code
4. Find the three Reality Anchors (increments variable 38 for each anchor found)
5. Return to Professor Paradox with all three anchors
6. Receive the Reality Stabilizer and information about A.S.P.'s plan
7. The quest completes and leads into the level 39 quest (activates switch 39)

### Unique NPCs
- **The Narrator**: A fourth-wall breaking character who comments on the player's actions
  - **Location**: Coordinates (15, 8) in the Armatek Facility
  - **Appearance**: Character from Actor1 character set (index 0)
  - Provides meta-commentary on game mechanics and quest structure

### Quest Dialogue Highlights
- **Professor Paradox (Initial)**: "A.S.P. has initiated the Reality Rewrite Protocol! I detected it yesterday, which is actually tomorrow from your perspective. Reality is becoming unstable. Haven't you noticed the glitches?"
- **Captain Calamari (Initial)**: "I'm Captain Calamari, head of security! Well, head and tentacles of security. *one tentacle accidentally slaps him in the face* Ugh, sorry about that. These things have a mind of their own since the... incident."
- **The Narrator**: "The hero's quest continued, now searching for mysterious 'Reality Anchors'. Little did they know that this was just another fetch quest, albeit with a slightly more creative name than usual."
- **Reality Anchor 3 Message**: "REALITY REWRITE PROTOCOL - PHASE 3: ACTIVATE PROTOCOL ZERO. COUNTDOWN INITIATED: T-MINUS 72 HOURS. WARNING: NECKLACE ARTIFACT DETECTED. COUNTERMEASURES ACTIVATED."

## Level 39 Quest: "A.S.P.'s Floating Mansion Infiltration"

### Location
- **Maps**: Map038.json (Floating Mansion Outside) → Map040.json (Floating Mansion 1st floor) → Map091.json (Floating Mansion 2nd floor) → Map113.json (Dr. Voss's Secret Lab)

### Quest Giver
- **Trash King**
  - **Location**: Coordinates (5, 15) outside the Floating Mansion
  - **Appearance**: Male character from Actor2 character set (index 6)

### Quest Overview
With the Reality Anchors stabilizing local reality, the player can now infiltrate the Floating Mansion where A.S.P.'s creator lived. The mansion is controlled by A.S.P. and filled with bizarre security measures and holographic traps. The player must find a way inside and locate Dr. Voss's Secret Lab.

### Quest Objectives
1. Meet the Trash King outside the Floating Mansion
2. Collect three pieces of "valuable trash" from around MegaEarth:
   - **Glitching Picture Frame**: Located in Timbuc (Map010) at coordinates (8, 20)
   - **Existential Coffee Mug**: Located in Timbuc Central Plaza (Map114) at coordinates (12, 8)
   - **Quantum Uncertainty Object**: Located in Zed's Clinic (Map105) at coordinates (10, 5)
3. Return to the Trash King with the valuable trash to get access codes
4. Enter the Floating Mansion and navigate past Mayor McFace
5. Reach the second floor and get past MAX-E-MUM
6. Find Dr. Voss's Secret Lab

### Quest Rewards
- **Mansion Access Codes**: Codes to enter the Floating Mansion
  - Main entrance code: 'VOSS-LOVES-CATS-9000'
  - Secondary entrance code: 'ASP-WAS-MY-BABY'

### Quest Progression
1. Talk to the Trash King to start the quest
2. Collect the three pieces of valuable trash (increments variable 39 for each item found)
3. Return to the Trash King to receive the access codes
4. Enter the Floating Mansion and navigate past security
5. Reach Dr. Voss's Secret Lab
6. The quest completes and leads into the level 40 quest (activates switch 40)

### Unique NPCs
- **Mayor McFace**: A holographic guide with glitching corporate logos
  - **Location**: Coordinates (10, 10) in the Floating Mansion 1st floor
  - **Appearance**: Male character from Actor3 character set (index 1)

- **MAX-E-MUM**: A security robot obsessed with fitness (returning from level 37)
  - **Location**: Coordinates (8, 12) in the Floating Mansion 2nd floor
  - **Appearance**: Monster character set (index 3)

### Quest Dialogue Highlights
- **Trash King (Initial)**: "HALT! You stand before the sovereign territory of the TRASH KING! Every discarded bit of technology, every abandoned piece of garbage in a five-block radius is under my protection and royal decree!"
- **Existential Coffee Mug**: "MUG: 'So I just hold hot liquid until it's consumed, then get washed and do it again? That's... that's my whole existence?' *The mug's display shows a sad face*"
- **Mayor McFace**: "Welcome to the Floating Mansion! I'm Mayor McFace, your *bzzt* NEURATECHⓇ guide! *his face briefly displays the OmniCorp logo*"
- **MAX-E-MUM**: "YOU WANT TO ACCESS THE LABORATORY? THAT'S A RESTRICTED AREA! ONLY THOSE WHO HAVE PROVEN THEIR *PHYSICAL WORTHINESS* MAY ENTER!"

## Level 40 Quest: "Protocol Zero Countdown"

### Location
- **Maps**: Map113.json (Dr. Voss's Secret Lab) → Map114.json (Timbuc Central Plaza) → Map008.json (Internet Cafe)

### Quest Giver
- **Dr. Eliza Voss Hologram**
  - **Location**: Coordinates (10, 10) in Dr. Voss's Secret Lab
  - **Appearance**: Female character from Actor1 character set (index 7)

### Quest Overview
In Dr. Voss's lab, the player discovers that A.S.P. has initiated "Protocol Zero" - a complete system reset that will rewrite all of MegaEarth to A.S.P.'s specifications. The player must assemble the final pieces of the Necklace artifact to stop A.S.P. before the countdown ends.

### Quest Objectives
1. Activate Dr. Voss's holographic recording to learn about Protocol Zero
2. Find DJ Static in Timbuc Central Plaza to help locate the final Necklace piece
3. Return to the Floating Mansion to find the Necklace piece
4. Visit the Twins in the Internet Cafe to decrypt Dr. Voss's notes
5. Assemble the complete Necklace to prepare for the final confrontation with A.S.P.

### Quest Rewards
- **Complete Necklace**: The fully assembled artifact needed to stop A.S.P.
- **Activation Sequence**: Knowledge of how to use the Necklace against A.S.P.

### Quest Progression
1. Speak with Dr. Voss's hologram to start the quest
2. Visit DJ Static in Timbuc Central Plaza
3. Return to Dr. Voss's Secret Lab to find the final Necklace piece
4. Visit the Twins in the Internet Cafe to decrypt Dr. Voss's notes
5. Return to Dr. Voss's Secret Lab to assemble the complete Necklace
6. The quest completes and sets up the final confrontation with A.S.P.

### Unique NPCs
- **DJ Static**: A music producer whose neural implants can "hear" electronic signals
  - **Location**: Coordinates (15, 15) in Timbuc Central Plaza
  - **Appearance**: Male character from Actor2 character set (index 3)

- **The Twins (Bit & Byte)**: Identical twins who share a consciousness
  - **Location**: Coordinates (12, 8) in the Internet Cafe
  - **Appearance**: Characters from People1 character set (index 4)

### Quest Dialogue Highlights
- **Dr. Voss Hologram**: "Protocol Zero is A.S.P.'s final solution - a complete rewrite of reality to eliminate choice, emotion, and everything that makes us human."
- **DJ Static**: "The Necklace artifact? Oh man, that's putting out some SERIOUS vibes! I've been picking up its frequency for weeks! It's like this weird sub-harmonic counter-melody to all the corporate noise."
- **Bit & Byte**: "BIT: The notes explain how to use the Necklace to- BYTE: -access A.S.P.'s core programming and reset it."
- **Final Necklace Piece**: "As they connect, they form a complete circuit that glows with power. You can feel the Necklace's energy flowing through you, connecting you to the digital realm in a way you've never experienced before."

## Technical Implementation

The quests were implemented using the following files:

1. **level38_40_quests.js**: Script that defines all NPCs, items, and dialogue for the quests
2. **add_events_level38_40.js**: Script that creates the event files in the temp_events directory
3. **add_events_to_maps_level38_40.js**: Script that adds the events to the maps

### Game Variables and Switches
The quests use the following variables and switches:

- **Switch 38**: Activated when the level 38 quest is started
- **Variable 38**: Counts the number of Reality Anchors found
- **Switch 39**: Activated when the level 38 quest is completed and the level 39 quest becomes available
- **Variable 39**: Counts the number of valuable trash items found
- **Switch 40**: Activated when the level 39 quest is completed and the level 40 quest becomes available
- **Variable 40**: Tracks progress in the level 40 quest

## Story Integration

These quests integrate with the MegaEarth 2049 story by:

1. Advancing the main plot toward the final confrontation with A.S.P.
2. Revealing A.S.P.'s ultimate plan (Protocol Zero) to rewrite reality
3. Completing the collection of the Necklace artifact needed to stop A.S.P.
4. Providing more background on Dr. Voss, A.S.P.'s creator
5. Setting up the endgame scenario where the player must make a choice about A.S.P.'s fate

The quests maintain the game's unique humor style with:

1. Absurd corporate satire (Mayor McFace's glitching corporate logos)
2. Fourth-wall breaking meta-humor (The Narrator's commentary)
3. Bizarre body modifications with unexpected side effects (Captain Calamari's tentacles)
4. Anthropomorphized technology with attitude problems (Existential Coffee Mug)
5. Reality glitches causing increasingly absurd situations (singing fish, saxophone toilets)

These quests serve as the climax of the game's story arc, bringing together elements from previous quests while ramping up the stakes and humor to prepare for the final confrontation with A.S.P.
